<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>ë§ˆë²•ì˜ ë²„íŠ¼ - ë‚ ì”¨ í™•ì¥</title>
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        font-family: "Pretendard", sans-serif;
        height: 100vh;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        transition: background 1s, color 1s;
      }

      .story-box {
        text-align: center;
        max-width: 600px;
        margin: 20px;
        padding: 20px;
        border-radius: 12px;
        background: rgba(255, 255, 255, 0.7);
      }

      .magic-button {
        padding: 12px 24px;
        font-size: 1.2rem;
        border: none;
        border-radius: 8px;
        background: #6a5acd;
        color: white;
        cursor: pointer;
      }

      .magic-button:hover {
        background: #483d8b;
      }

      /* ìƒíƒœë³„ ë°°ê²½ */
      .state-day {
        background: linear-gradient(to top, #87cefa, #ffffff);
        color: #222;
      }

      .state-night {
        background: linear-gradient(to top, #0f2027, #203a43, #2c5364);
        color: #f0f0f0;
      }

      .state-space {
        background: radial-gradient(circle, #000000, #111);
        color: #00ffcc;
      }

      .state-rain {
        background: linear-gradient(to top, #4e5d6c, #a3b1c6);
        color: #fff;
      }

      .state-snow {
        background: linear-gradient(to bottom, #f0f8ff, #e6f7ff);
        color: #333;
      }

      .state-rainbow {
        background: linear-gradient(
          to right,
          red,
          orange,
          yellow,
          green,
          blue,
          indigo,
          violet
        );
        color: #000;
      }

      /* ë¹„ ì• ë‹ˆë©”ì´ì…˜ */
      .rain-drop {
        position: absolute;
        width: 2px;
        height: 15px;
        background: rgba(255, 255, 255, 0.5);
        border-radius: 50%;
        animation: dropFall 0.6s linear infinite;
      }

      @keyframes dropFall {
        from {
          transform: translateY(-100vh);
        }
        to {
          transform: translateY(100vh);
        }
      }

      /* ëˆˆ ì• ë‹ˆë©”ì´ì…˜ */
      .snowflake {
        position: absolute;
        color: white;
        font-size: 1.5rem;
        animation: snowFall 6s linear infinite;
      }

      @keyframes snowFall {
        0% {
          transform: translateY(0) rotate(0deg);
          opacity: 1;
        }
        100% {
          transform: translateY(100vh) rotate(360deg);
          opacity: 0;
        }
      }
      .state-cloudy {
        background: linear-gradient(to top, #d7d2cc, #304352);
        color: #fff;
      }

      /* êµ¬ë¦„ ìŠ¤íƒ€ì¼ */
      .cloud {
        position: absolute;
        background: #fff;
        border-radius: 50%;
        opacity: 0.8;
        z-index: 0;
        box-shadow: -30px 10px 40px #fff, 30px 10px 50px #fff,
          0px 10px 30px #fff;
        animation: floatCloud 40s linear infinite;
      }

      @keyframes floatCloud {
        0% {
          transform: translateX(-200px);
        }
        100% {
          transform: translateX(120vw);
        }
      }

      .star {
        position: absolute;
        width: 2px;
        height: 2px;
        background: white;
        border-radius: 50%;
        animation: twinkle 2s infinite ease-in-out;
        opacity: 0.8;
        z-index: 0;
      }

      @keyframes twinkle {
        0%,
        100% {
          opacity: 0.3;
          transform: scale(1);
        }
        50% {
          opacity: 1;
          transform: scale(1.5);
        }
      }

      .rocket-img {
        position: absolute;
        width: 100px;
        top: 80%;
        left: -150px;
        opacity: 0;
        transition: none;
        z-index: 2;
      }

      .rocket-fly {
        animation: flyRocket 5s linear forwards;
        opacity: 1;
      }

      @keyframes flyRocket {
        0% {
          transform: translate(0, 0) rotate(0deg);
          opacity: 1;
        }
        100% {
          transform: translate(120vw, -120vh) rotate(30deg);
          opacity: 0;
        }
      }
    </style>
  </head>
  <body>
    <div class="story-box" id="story">
      ğŸŒ ì•„ì¹¨ì´ ë°ì•˜ìŠµë‹ˆë‹¤! ë§ˆë²•ì˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ë³´ì„¸ìš”.
    </div>
    <button class="magic-button" onclick="changeWorld()">âœ¨ ë§ˆë²•ì˜ ë²„íŠ¼</button>
    <audio id="bgm" src="sunnyday.mp3" preload="auto"></audio>

    <script>
      const body = document.body;
      const story = document.getElementById("story");

      let state = 0;
      const witchStory = {
        className: "state-witch",
        text: "ğŸ§™â€â™€ï¸ ë§ˆë…€ê°€ ë‚˜íƒ€ë‚¬ì–´ìš”! ì£¼ë¬¸ì„ ì™¸ìš°ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤...",
      };
      const stories = [
        { className: "state-day", text: "ğŸŒ ì•„ì¹¨ì´ ë°ì•˜ìŠµë‹ˆë‹¤!" },
        {
          className: "state-night",
          text: "ğŸŒ™ ë°¤ì´ ì°¾ì•„ì™”ìŠµë‹ˆë‹¤. ë³„ë¹›ì´ ë°˜ì§ì…ë‹ˆë‹¤.",
        },
        {
          className: "state-space",
          text: "ğŸš€ ìš°ì£¼ë¡œ ë– ë‚¬ìŠµë‹ˆë‹¤! ë³„ë“¤ì´ ë‹¹ì‹ ì„ ë°˜ê¹ë‹ˆë‹¤.",
        },
        {
          className: "state-snow",
          text: "â„ï¸ ëˆˆì´ í‘í‘ ë‚´ë¦½ë‹ˆë‹¤. ê²¨ìš¸ì™•êµ­ ê°™ì•„ìš”!",
        },
        {
          className: "state-cloudy",
          text: "â˜ï¸ í•˜ëŠ˜ì´ ì”ëœ© íë ¤ìš”. ê³§ ë¹„ê°€ ì˜¬ ê²ƒ ê°™ë„¤ìš”.",
        },
        {
          className: "state-rain",
          text: "ğŸŒ§ï¸ ë¹„ê°€ ë‚´ë¦¬ê¸° ì‹œì‘í•©ë‹ˆë‹¤. ìš°ì‚°ì„ ì±™ê¸°ì„¸ìš”.",
        },
        {
          className: "state-rainbow",
          text: "ğŸŒˆ ë¹„ê°€ ê·¸ì¹˜ê³  ë¬´ì§€ê°œê°€ ë–´ìŠµë‹ˆë‹¤. í¬ë§ì˜ ë©”ì‹œì§€ ê°™ì•„ìš”.",
        },
      ];

      function changeWorld() {
        const bgm = document.getElementById("bgm");
        state = (state + 1) % stories.length;
        const { className, text } = stories[state];

        body.className = className;
        clearWeatherEffects(); // âœ… ë°˜ë“œì‹œ ë¨¼ì € ì‹¤í–‰

        let finalText = text;
        if (className === "state-rain") createRainDrops();
        if (className === "state-snow") createSnowflakes();
        if (className === "state-cloudy") createClouds();
        if (className === "state-night") createStars();
        if (className === "state-space") {
          const rocket = document.querySelector(".rocket-img");
          rocket.classList.add("rocket-fly");
        }

        story.innerHTML = finalText;

        const isMusicState =
          className.includes("state-space") || className.includes("state-day");
        if (isMusicState) {
          bgm.volume = 0.5;
          bgm.play().catch((e) => console.log("ìŒì•… ì¬ìƒ ì°¨ë‹¨:", e));
        } else {
          bgm.pause();
          bgm.currentTime = 0;
        }
      }

      function clearWeatherEffects() {
        document
          .querySelectorAll(".snowflake, .rain-drop, .cloud, .star")
          .forEach((el) => el.remove());

        const rocket = document.querySelector(".rocket-img");
        if (rocket) rocket.classList.remove("rocket-fly"); // ë§¤ ìƒíƒœ ì „í™˜ ì‹œ ì´ˆê¸°í™”
      }

      function createStars() {
        for (let i = 0; i < 50; i++) {
          const star = document.createElement("div");
          star.className = "star";
          star.style.top = `${Math.random() * 100}vh`;
          star.style.left = `${Math.random() * 100}vw`;
          star.style.animationDuration = `${1 + Math.random() * 2}s`;
          document.body.appendChild(star);
        }
      }

      function createSnowflakes() {
        for (let i = 0; i < 30; i++) {
          const snow = document.createElement("div");
          snow.className = "snowflake";
          snow.textContent = "â„ï¸";
          snow.style.left = `${Math.random() * 100}vw`;
          snow.style.animationDuration = `${3 + Math.random() * 3}s`;
          snow.style.fontSize = `${1 + Math.random() * 2}rem`;
          document.body.appendChild(snow);
        }
      }

      function createRainDrops(count = 80, opacity = 0.5, speed = 0.6) {
        for (let i = 0; i < count; i++) {
          const drop = document.createElement("div");
          drop.className = "rain-drop";
          drop.style.left = `${Math.random() * 100}vw`;
          drop.style.animationDelay = `${Math.random() * 1}s`;
          drop.style.opacity = opacity;
          drop.style.animationDuration = `${speed}s`;
          document.body.appendChild(drop);
        }
      }

      function createClouds() {
        for (let i = 0; i < 5; i++) {
          const cloud = document.createElement("div");
          cloud.className = "cloud";
          const size = 60 + Math.random() * 60;
          cloud.style.width = `${size}px`;
          cloud.style.height = `${size * 0.6}px`;
          cloud.style.top = `${Math.random() * 40}vh`;
          cloud.style.left = `${-200 - Math.random() * 300}px`;
          cloud.style.animationDuration = `${20 + Math.random() * 10}s`;
          document.body.appendChild(cloud);
        }
      }
    </script>
    <img
      src="https://www.logoyogo.com/web/wp-content/uploads/edd/2021/03/logoyogo-1-247.jpg"
      class="rocket-img"
      alt="rocket"
    />
  </body>
</html>
